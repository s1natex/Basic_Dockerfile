<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Password-Generator</title>
    <style>
      body { font-family: system-ui, sans-serif; margin: 2rem; max-width: 720px; }
      header { font-size: 2rem; font-weight: 700; margin-bottom: 1rem; }
      .row { margin: .5rem 0; }
      input, button { padding: .5rem; font-size: 1rem; }
      #output { padding: .75rem; background: #f5f5f5; border-radius: .5rem; word-break: break-all; }
      .controls { display: flex; gap: .5rem; align-items: center; flex-wrap: wrap; }
    </style>
  </head>
  <body>
    <header>Password-Generator</header>

    <div class="row controls">
      <label>Length:
        <input id="length" type="number" min="1" max="256" value="16" />
      </label>
      <label><input id="digits" type="checkbox" checked /> digits</label>
      <label><input id="symbols" type="checkbox" checked /> symbols</label>
      <label><input id="uppercase" type="checkbox" checked /> uppercase</label>
      <button id="gen">Generate Password</button>
      <button id="reset">Reset</button>
    </div>

    <div class="row">
      <div id="output" aria-live="polite"></div>
    </div>

    <script>
      const el = (id) => document.getElementById(id);
      const out = el("output");
      el("gen").addEventListener("click", async () => {
        const params = new URLSearchParams({
          length: el("length").value || 16,
          digits: el("digits").checked,
          symbols: el("symbols").checked,
          uppercase: el("uppercase").checked
        });
        out.textContent = "Generating...";
        try {
          const r = await fetch("/api/generate?" + params.toString());
          const data = await r.json();
          out.textContent = data.password || ("Error: " + (data.error || r.status));
        } catch (e) {
          out.textContent = "Error: " + e;
        }
      });
      el("reset").addEventListener("click", () => {
        el("length").value = 16;
        el("digits").checked = true;
        el("symbols").checked = true;
        el("uppercase").checked = true;
        out.textContent = "";
      });
    </script>
  </body>
</html>
